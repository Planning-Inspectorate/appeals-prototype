{% extends '_layouts/layout-main.html' %}

{% set title = 'Your appeal' %}
{% set back = false %}
{% set prototypeLinks = [{href: 'declaration', text: 'Skip to declaration'}] %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full govuk-!-margin-bottom-3">
      <h1 class="govuk-heading-l">
        {{ title }}
      </h1>

      <!-- SECTION -->
      <!-- appeal metadata -->

      <div class="govuk-grid-row govuk-!-margin-bottom-6">
        <div class="govuk-grid-column-full">
          {# Tweak the summary list to be smaller #}

          <style>
            .appeal-details .govuk-summary-list__key,
            .appeal-details .govuk-summary-list__value,
            .appeal-details .govuk-summary-list__actions {
              padding-top: 0;
              padding-bottom: 0;
            }
            /* Give some space for the tag being inline now */
            .app-task-list__section {
              padding-right: 140px
            }
          </style>

          {{ govukSummaryList({
            classes: 'appeal-details govuk-summary-list--no-border govuk-!-margin-bottom-0',
            rows: [

              {
                key: {
                  text: 'Local planning authority'
                },
                value: {
                  text: data['lpa'] or 'Bradford'
                }
              },
              {
                key: {
                  text: 'Appeal type'
                },
                value: {
                  html: 'Full planning<br>Listed building consent'
                }
              }
            ]
          }) }}

        </div>
      </div>

      <p class="govuk-body">Your deadline to submit this appeal is {{ '6' | daysInFuture }}.</p>

      <p class="govuk-!-margin-bottom-0">
        <a href="#0" class="govuk-link--no-visited-state">Save and come back later</a>.
      </p>

    </div>

    <div class="govuk-grid-column-three-quarters-from-desktop">
      <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--l">

      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">
        Appeal incomplete
      </h2>
      <p class="govuk-!-margin-bottom-7">You have completed {{count}} of 6 sections.</p>

      {# Tweak the task list so we can merge the CYA in #}
      <style>
        .app-task-list>li {
          position: relative;
        }
        .app-task-list__section .govuk-tag {
          position: absolute;
          top: 3px;
          right: 0;
        }
        .app-task-list .govuk-summary-list {
          border-top: 1px solid #b1b4b6;
        }
        /* Give some space for the tag being inline now */
        .app-task-list__section {
          padding-right: 140px
        }
      </style>

      <ol class="app-task-list">

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">1. </span> Appeal detail
            {% if data['prepare-appeal-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['prepare-appeal-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Your name'
                },
                value: {
                  html: (data['applicant-first-name']+' '+data['applicant-last-name'] if data['applicant-first-name'] else 'Jane Doe')+('<br>'+data['agency-name'] if data['agency-name'])
                }
                if data['contact-details-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/contact-details?cya=true',
                      html: 'Change'
                    }
                    if data['contact-details-complete'] else
                    {
                      href: 'prepare-appeal/contact-details',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Named on application'
                },
                value: {
                  html: data['appellant-check'] or 'You'
                }
                if data['appellant-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/appellant-check?cya=true',
                      html: 'Change'
                    }
                    if data['appellant-check-complete'] else
                    {
                      href: 'prepare-appeal/appellant-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Their name'
                },
                value: {
                  html: (data['appellant-first-name']+' '+data['appellant-last-name'] if data['appellant-first-name'] else 'Joe Bloggs')
                }
                if data['appellant-name-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/appellant-name?cya=true',
                      html: 'Change'
                    }
                    if data['appellant-name-complete'] else
                    {
                      href: 'prepare-appeal/appellant-name?',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['appellant-check'] == 'Another individual',
              {
                key: {
                  html: 'Application reference'
                },
                value: {
                  html: data['lpa-reference'] or 'ABC123456'
                }
                if data['lpa-reference-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/lpa-reference?cya=true',
                      html: 'Change'
                    }
                    if data['lpa-reference-complete'] else
                    {
                      href: 'prepare-appeal/lpa-reference',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site address'
                },
                value: {
                  html: (data['address-line-1'] or '1 Road Name')+('<br>'+data['address-line-2'] if data['address-line-2'])+('<br>'+(data['address-town'] or 'London'))+('<br>'+(data['address-postcode'] or 'SW1A 1AA'))
                }
                if data['address-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/address?cya=true',
                      html: 'Change'
                    }
                    if data['address-complete'] else
                    {
                      href: 'prepare-appeal/address',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site fully owned'
                },
                value: {
                  html: data['own-all'] or 'Yes'
                }
                if data['own-all-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/own-all?cya=true',
                      html: 'Change'
                    }
                    if data['own-all-complete'] else
                    {
                      href: 'prepare-appeal/own-all',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site partially owned'
                },
                value: {
                  html: data['own-some'] or 'Yes'
                }
                if data['own-some-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/own-some?cya=true',
                      html: 'Change'
                    }
                    if data['own-some-complete'] else
                    {
                      href: 'prepare-appeal/own-some',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No',
              {
                key: {
                  html: 'All owners known'
                },
                value: {
                  html: data['own-others'] or 'Yes'
                }
                if data['own-others-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/own-others?cya=true',
                      html: 'Change'
                    }
                    if data['own-others-complete'] else
                    {
                      href: 'prepare-appeal/own-others',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No',
              {
                key: {
                  html: 'Owners told'
                },
                value: {
                  html: 'Yes'
                }
                if data['owners-notified-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/owners-notified?cya=true',
                      html: 'Change'
                    }
                    if data['owners-notified-complete'] else
                    {
                      href: 'prepare-appeal/owners-notified',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No' and data['own-others'] == 'Yes',
              {
                key: {
                  html: 'Attempted to identify owners'
                },
                value: {
                  html: 'Yes'
                }
                if data['owners-searched-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/owners-searched?cya=true',
                      html: 'Change'
                    }
                    if data['owners-searched-complete'] else
                    {
                      href: 'prepare-appeal/owners-searched',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No' and (data['own-others'] == 'Some' or data['own-others'] == 'No'),
              {
                key: {
                  html: 'Advertised appeal'
                },
                value: {
                  html: 'Yes'
                }
                if data['owners-advertised-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/owners-advertised?cya=true',
                      html: 'Change'
                    }
                    if data['owners-advertised-complete'] else
                    {
                      href: 'prepare-appeal/owners-advertised',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No' and (data['own-others'] == 'Some' or data['own-others'] == 'No'),
              {
                key: {
                  html: 'Owners told'
                },
                value: {
                  html: 'Yes'
                }
                if data['owners-notified-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/owners-notified?cya=true',
                      html: 'Change'
                    }
                    if data['owners-notified-complete'] else
                    {
                      href: 'prepare-appeal/owners-notified',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['own-all'] == 'No' and data['own-others'] == 'Some',
              {
                key: {
                  html: 'Agricultural holding'
                },
                value: {
                  html: data['agricultural-holding'] or 'No'
                }
                if data['agricultural-holding-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/agricultural-holding?cya=true',
                      html: 'Change'
                    }
                    if data['agricultural-holding-complete'] else
                    {
                      href: 'prepare-appeal/agricultural-holding',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Tenant'
                },
                value: {
                  html: data['agricultural-tenant'] or 'No'
                }
                if data['agricultural-tenant-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/agricultural-tenant?cya=true',
                      html: 'Change'
                    }
                    if data['agricultural-tenant-complete'] else
                    {
                      href: 'prepare-appeal/agricultural-tenant',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['agricultural-holding'] == 'Yes',
              {
                key: {
                  html: 'Other tenants'
                },
                value: {
                  html: data['agricultural-others'] or 'No'
                }
                if data['agricultural-others-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/agricultural-others?cya=true',
                      html: 'Change'
                    }
                    if data['agricultural-others-complete'] else
                    {
                      href: 'prepare-appeal/agricultural-others',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['agricultural-holding'] == 'Yes' and data['agricultural-tenant'] == 'Yes',
              {
                key: {
                  html: 'Tenants told'
                },
                value: {
                  html: 'Yes'
                }
                if data['agricultural-notified-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/agricultural-notified?cya=true',
                      html: 'Change'
                    }
                    if data['agricultural-notified-complete'] else
                    {
                      href: 'prepare-appeal/agricultural-notified',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['agricultural-holding'] == 'Yes' and (data['agricultural-tenant'] == 'No' or data['agricultural-others'] == 'Yes'),
              {
                key: {
                  html: 'Visibility'
                },
                value: {
                  html: 'No<br>'+data['site-visibility__details'] if data['site-visibility'] == 'No' else 'Yes'
                }
                if data['site-visibility-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/site-visibility?cya=true',
                      html: 'Change'
                    }
                    if data['site-visibility-complete'] else
                    {
                      href: 'prepare-appeal/site-visibility',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site health and safety issues'
                },
                value: {
                  html: 'Yes<br>'+data['health-and-safety__details'] if data['health-and-safety'] == 'Yes' else 'No'
                }
                if data['health-and-safety-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/health-and-safety?cya=true',
                      html: 'Change'
                    }
                    if data['health-and-safety-complete'] else
                    {
                      href: 'prepare-appeal/health-and-safety',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Appeal procedure'
                },
                value: {
                  html: data['procedure'] or 'Written representations'
                }
                if data['procedure-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/procedure?cya=true',
                      html: 'Change'
                    }
                    if data['procedure-complete'] else
                    {
                      href: 'prepare-appeal/procedure',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: data['procedure']+' reasons'
                },
                value: {
                  html: data['procedure-reason'] or 'My reasonsâ€¦'
                }
                if data['procedure--reason-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/procedure--reason?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--reason-complete'] else
                    {
                      href: 'prepare-appeal/procedure--reason',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry' or data['procedure'] == 'Hearing',
              {
                key: {
                  html: 'Inquiry length'
                },
                value: {
                  html: (data['procedure-lenth'] or '5')+' days'
                }
                if data['procedure--length-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/procedure--length?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--length-complete'] else
                    {
                      href: 'prepare-appeal/procedure--length',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry',
              {
                key: {
                  html: 'Inquiry witnesses'
                },
                value: {
                  html: (data['procedure-witnesses'] or '2')
                }
                if data['procedure--witnesses-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/procedure--witnesses?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--witnesses-complete'] else
                    {
                      href: 'prepare-appeal/procedure--witnesses',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry',
              {
                key: {
                  html: 'Your appeal statement'
                },
                value: {
                  html: data['statementText'] or 'Your appeal statement here'
                }
                if data['procedure-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'prepare-appeal/statement?cya=true',
                      html: 'Change'
                    }
                    if data['appeal-statement'] else
                    {
                      href: 'prepare-appeal/statement',
                      html: 'Answer'
                    }
                  ]
                }
              }
            ]
          }) }}
        </li>

        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">2. </span> Full planning documents
            {% if data['upload-documents-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['upload-documents-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [

              {
                key: {
                  html: 'Draft statement of common ground'
                },
                value: {
                  html: data['common-ground'] | join('<br>') if data['common-ground'] else 'common-ground.pdf'
                }
                if data['common-ground-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/common-ground?cya=true',
                      html: 'Change'
                    }
                    if data['common-ground-complete'] else
                    {
                      href: 'upload-documents/common-ground',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry' or data['procedure'] == 'Hearing',
              {
                key: {
                  html: 'Add new plans or drawings'
                },
                value: {
                  html: data['new-plans-check'] or 'No'
                }
                if data['new-plans-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/new-plans-check?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-check-complete'] else
                    {
                      href: 'upload-documents/new-plans-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New plans or drawings'
                },
                value: {
                  html: data['new-plans'] | join('<br>') if data['new-plans'] else 'new-plans.pdf'
                }
                if data['new-plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/new-plans?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-complete'] else
                    {
                      href: 'upload-documents/new-plans',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['new-plans-check'] == 'Yes',
              {
                key: {
                  html: 'Add planning obligation'
                },
                value: {
                  html: data['planning-obligation-check'] or 'No'
                }
                if data['planning-obligation-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation-check?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-check-complete'] else
                    {
                      href: 'upload-documents/planning-obligation-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Planning obligation status'
                },
                value: {
                  html: data['planning-obligation-status'] or 'Not started yet'
                }
                if data['planning-obligation-status-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation-status?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-status-complete'] else
                    {
                      href: 'upload-documents/planning-obligation-status',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['planning-obligation-check'] == 'Yes',
              {
                key: {
                  html: 'Draft planning obligation' if data['planning-obligation-status'] == 'In draft' else 'Planning obligation'
                },
                value: {
                  html: data['planning-obligation'] | join('<br>') if data['planning-obligation'] else 'planning-obligation.pdf'
                }
                if data['planning-obligation-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-complete'] else
                    {
                      href: 'upload-documents/planning-obligation',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['planning-obligation-check'] == 'Yes' and (data['planning-obligation-status'] == 'Finalised and ready to submit' or data['planning-obligation-status'] == 'In draft'),
              {
                key: {
                  html: 'Add new supporting documents'
                },
                value: {
                  html: data['other-check'] or 'No'
                }
                if data['other-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/other-check?cya=true',
                      html: 'Change'
                    }
                    if data['other-check-complete'] else
                    {
                      href: 'upload-documents/other-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New supporting documents'
                },
                value: {
                  html: data['other'] | join('<br>') if data['other'] else 'other.pdf'
                }
                if data['other-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/other?cya=true',
                      html: 'Change'
                    }
                    if data['other-complete'] else
                    {
                      href: 'upload-documents/other',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['other-check'] == 'Yes'
            ]
          }) }}
        </li>













        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">3. </span> Listed building documents
            {% if data['upload-documents-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['upload-documents-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [

              {
                key: {
                  html: 'Draft statement of common ground'
                },
                value: {
                  html: data['common-ground'] | join('<br>') if data['common-ground'] else 'common-ground.pdf'
                }
                if data['common-ground-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/common-ground?cya=true',
                      html: 'Change'
                    }
                    if data['common-ground-complete'] else
                    {
                      href: 'upload-documents/common-ground',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry' or data['procedure'] == 'Hearing',
              {
                key: {
                  html: 'Add new plans or drawings'
                },
                value: {
                  html: data['new-plans-check'] or 'No'
                }
                if data['new-plans-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/new-plans-check?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-check-complete'] else
                    {
                      href: 'upload-documents/new-plans-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New plans or drawings'
                },
                value: {
                  html: data['new-plans'] | join('<br>') if data['new-plans'] else 'new-plans.pdf'
                }
                if data['new-plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/new-plans?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-complete'] else
                    {
                      href: 'upload-documents/new-plans',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['new-plans-check'] == 'Yes',
              {
                key: {
                  html: 'Add planning obligation'
                },
                value: {
                  html: data['planning-obligation-check'] or 'No'
                }
                if data['planning-obligation-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation-check?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-check-complete'] else
                    {
                      href: 'upload-documents/planning-obligation-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Planning obligation status'
                },
                value: {
                  html: data['planning-obligation-status'] or 'Not started yet'
                }
                if data['planning-obligation-status-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation-status?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-status-complete'] else
                    {
                      href: 'upload-documents/planning-obligation-status',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['planning-obligation-check'] == 'Yes',
              {
                key: {
                  html: 'Draft planning obligation' if data['planning-obligation-status'] == 'In draft' else 'Planning obligation'
                },
                value: {
                  html: data['planning-obligation'] | join('<br>') if data['planning-obligation'] else 'planning-obligation.pdf'
                }
                if data['planning-obligation-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/planning-obligation?cya=true',
                      html: 'Change'
                    }
                    if data['planning-obligation-complete'] else
                    {
                      href: 'upload-documents/planning-obligation',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['planning-obligation-check'] == 'Yes' and (data['planning-obligation-status'] == 'Finalised and ready to submit' or data['planning-obligation-status'] == 'In draft'),
              {
                key: {
                  html: 'Add new supporting documents'
                },
                value: {
                  html: data['other-check'] or 'No'
                }
                if data['other-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/other-check?cya=true',
                      html: 'Change'
                    }
                    if data['other-check-complete'] else
                    {
                      href: 'upload-documents/other-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New supporting documents'
                },
                value: {
                  html: data['other'] | join('<br>') if data['other'] else 'other.pdf'
                }
                if data['other-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/other?cya=true',
                      html: 'Change'
                    }
                    if data['other-complete'] else
                    {
                      href: 'upload-documents/other',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['other-check'] == 'Yes'
            ]
          }) }}
        </li>
        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">4. </span> Full appeal application documents
            {% if data['upload-documents-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['upload-documents-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Application form'
                },
                value: {
                  html: data['application'] | join('<br>') if data['application'] else 'application.pdf'
                }
                if data['application-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/application?cya=true',
                      html: 'Change'
                    }
                    if data['application-complete'] else
                    {
                      href: 'upload-documents/application',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Development description correct'
                },
                value: {
                  html: 'No, new description:<br>'+data['application-desc-new'] if data['application-desc-correct'] == 'No' else 'Yes'
                }
                if data['application-desc-correct-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/application-desc-correct?cya=true',
                      html: 'Change'
                    }
                    if data['application-desc-correct-complete'] else
                    {
                      href: 'upload-documents/application-desc-correct',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Plans, drawings and supporting documents'
                },
                value: {
                  html: data['plans'] | join('<br>') if data['plans'] else 'plans.pdf'
                }
                if data['plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/plans?cya=true',
                      html: 'Change'
                    }
                    if data['plans-complete'] else
                    {
                      href: 'upload-documents/plans',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Separate ownership certificate in application'
                },
                value: {
                  html: data['ownership-certificate-check'] or 'No'
                }
                if data['ownership-certificate-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/ownership-certificate-check?cya=true',
                      html: 'Change'
                    }
                    if data['ownership-certificate-check-complete'] else
                    {
                      href: 'upload-documents/ownership-certificate-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Separate ownership certificate'
                },
                value: {
                  html: data['ownership-certificate'] | join('<br>') if data['ownership-certificate'] else 'ownership-certificate.pdf'
                }
                if data['ownership-certificate-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/ownership-certificate?cya=true',
                      html: 'Change'
                    }
                    if data['ownership-certificate-complete'] else
                    {
                      href: 'upload-documents/ownership-certificate',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['ownership-certificate-check'] == 'Yes',
              {
                key: {
                  html: 'Design and access statement in application'
                },
                value: {
                  html: data['design-access-check'] or 'No'
                }
                if data['design-access-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/design-access-check?cya=true',
                      html: 'Change'
                    }
                    if data['design-access-check-complete'] else
                    {
                      href: 'upload-documents/design-access-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Design and access statement'
                },
                value: {
                  html: data['design-access'] | join('<br>') if data['design-access'] else 'design-access.pdf'
                }
                if data['design-access-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/design-access?cya=true',
                      html: 'Change'
                    }
                    if data['design-access-complete'] else
                    {
                      href: 'upload-documents/design-access',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['design-access-check'] == 'Yes',
              {
                key: {
                  html: 'Decision letter'
                },
                value: {
                  html: data['decision-letter'] | join('<br>') if data['decision-letter'] else 'decision-letter.pdf'
                }
                if data['decision-letter-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/decision-letter?cya=true',
                      html: 'Change'
                    }
                    if data['decision-letter-complete'] else
                    {
                      href: 'upload-documents/decision-letter',
                      html: 'Upload'
                    }
                  ]
                }
              }
            ]
          }) }}
        </li>









        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">5. </span> Listed building application documents
            {% if data['upload-documents-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['upload-documents-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Application form'
                },
                value: {
                  html: data['application'] | join('<br>') if data['application'] else 'application.pdf'
                }
                if data['application-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/application?cya=true',
                      html: 'Change'
                    }
                    if data['application-complete'] else
                    {
                      href: 'upload-documents/application',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Development description correct'
                },
                value: {
                  html: 'No, new description:<br>'+data['application-desc-new'] if data['application-desc-correct'] == 'No' else 'Yes'
                }
                if data['application-desc-correct-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/application-desc-correct?cya=true',
                      html: 'Change'
                    }
                    if data['application-desc-correct-complete'] else
                    {
                      href: 'upload-documents/application-desc-correct',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Plans, drawings and supporting documents'
                },
                value: {
                  html: data['plans'] | join('<br>') if data['plans'] else 'plans.pdf'
                }
                if data['plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/plans?cya=true',
                      html: 'Change'
                    }
                    if data['plans-complete'] else
                    {
                      href: 'upload-documents/plans',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Separate ownership certificate in application'
                },
                value: {
                  html: data['ownership-certificate-check'] or 'No'
                }
                if data['ownership-certificate-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/ownership-certificate-check?cya=true',
                      html: 'Change'
                    }
                    if data['ownership-certificate-check-complete'] else
                    {
                      href: 'upload-documents/ownership-certificate-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Separate ownership certificate'
                },
                value: {
                  html: data['ownership-certificate'] | join('<br>') if data['ownership-certificate'] else 'ownership-certificate.pdf'
                }
                if data['ownership-certificate-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/ownership-certificate?cya=true',
                      html: 'Change'
                    }
                    if data['ownership-certificate-complete'] else
                    {
                      href: 'upload-documents/ownership-certificate',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['ownership-certificate-check'] == 'Yes',
              {
                key: {
                  html: 'Design and access statement in application'
                },
                value: {
                  html: data['design-access-check'] or 'No'
                }
                if data['design-access-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/design-access-check?cya=true',
                      html: 'Change'
                    }
                    if data['design-access-check-complete'] else
                    {
                      href: 'upload-documents/design-access-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Design and access statement'
                },
                value: {
                  html: data['design-access'] | join('<br>') if data['design-access'] else 'design-access.pdf'
                }
                if data['design-access-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/design-access?cya=true',
                      html: 'Change'
                    }
                    if data['design-access-complete'] else
                    {
                      href: 'upload-documents/design-access',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['design-access-check'] == 'Yes',
              {
                key: {
                  html: 'Decision letter'
                },
                value: {
                  html: data['decision-letter'] | join('<br>') if data['decision-letter'] else 'decision-letter.pdf'
                }
                if data['decision-letter-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'upload-documents/decision-letter?cya=true',
                      html: 'Change'
                    }
                    if data['decision-letter-complete'] else
                    {
                      href: 'upload-documents/decision-letter',
                      html: 'Upload'
                    }
                  ]
                }
              }
            ]
          }) }}
        </li>




        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">6. </span> Submit
            {% if
              data['prepare-appeal-completed'] == 'true'
              and data['upload-documents-completed'] == 'true'
            %}
              {{ govukTag({
                html: 'Ready to submit',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Cannot start yet',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Accept declaration and submit',
                  classes: 'govuk-!-width-full'
                },
                actions: {
                  items: [
                    {
                      href: 'declaration',
                      html: 'Continue'
                    }
                  ]
                } if data['prepare-appeal-completed'] == 'true' and data['upload-documents-completed'] == 'true'
              }
            ]
          }) }}
        </li>




      </ol>
    </div>
  </div>
{% endblock %}
