<li>
  {# Calculate status for Planning Officer Report section #}
  {% set poReportRequired = [
    data['planning-officer-report'],
    data['upload-planning-officers-report-decision-notice'],
    data['community-infrastructure-check'],
    data['community-infrastructure-upload'],
    data['community-infrastructure-adopted'],
    data['community-infrastructure-date-day'],
    data['community-infrastructure-date-month'],
    data['community-infrastructure-date-year'],
    data['other-relevant-matters'],
    data['upload-other-relevant-matters']
  ] %}
  {% set communityInfrastructureDate = '' %}
  {% if data['community-infrastructure-date-day'] and data['community-infrastructure-date-month'] and data['community-infrastructure-date-year'] %}
    {% set communityInfrastructureDate = data['community-infrastructure-date-day'] ~ '/' ~ data['community-infrastructure-date-month'] ~ '/' ~ data['community-infrastructure-date-year'] %}
  {% endif %}
  {% set poReportAnswered = poReportRequired | reject("equalto", undefined) | reject("equalto", "") | list %}
  {% set poReportComplete = (poReportAnswered.length == poReportRequired.length and poReportRequired.length > 0) %}
  {% set poReportInProgress = (poReportAnswered.length > 0 and poReportAnswered.length < poReportRequired.length) %}

  <h2 class="app-task-list__section">
    2. Planning officer report
    {% if poReportComplete %}
      {{ govukTag({
        text: "Completed",
        classes: "govuk-tag"
      }) }}
    {% elif poReportInProgress %}
      {{ govukTag({
        text: "In progress",
        classes: "govuk-tag govuk-tag--grey"
      }) }}
    {% else %}
      {{ govukTag({
        text: "Not started",
        classes: "govuk-tag govuk-tag--grey"
      }) }}
    {% endif %}
  </h2>

  {{ govukTable({
    firstCellIsHeader: true,
    head: [],
    rows: [
      [
        { text: "Planning officer report", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['planning-officer-report'] if data['planning-officer-report'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="planning-officer-report" class="govuk-link">Change</a>' if data['planning-officer-report'] else '<a href="planning-officer-report" class="govuk-link">Answer</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Upload planning officers report decision notice", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['upload-planning-officers-report-decision-notice'] if data['upload-planning-officers-report-decision-notice'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="upload-planning-officers-report-decision-notice" class="govuk-link">Change</a>' if data['upload-planning-officers-report-decision-notice'] else '<a href="upload-planning-officers-report-decision-notice" class="govuk-link">Upload</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Community infrastructure levy", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['community-infrastructure-check'] if data['community-infrastructure-check'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="community-infrastructure-check" class="govuk-link">Change</a>' if data['community-infrastructure-check'] else '<a href="community-infrastructure-check" class="govuk-link">Answer</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Community infrastructure upload", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['community-infrastructure-upload'] if data['community-infrastructure-upload'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="community-infrastructure-upload" class="govuk-link">Change</a>' if data['community-infrastructure-upload'] else '<a href="community-infrastructure-upload" class="govuk-link">Upload</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Community infrastructure adopted", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['community-infrastructure-adopted'] if data['community-infrastructure-adopted'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="community-infrastructure-adopted" class="govuk-link">Change</a>' if data['community-infrastructure-adopted'] else '<a href="community-infrastructure-adopted" class="govuk-link">Answer</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Community infrastructure date", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: communityInfrastructureDate if communityInfrastructureDate else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="community-infrastructure-date" class="govuk-link">Change</a>' if communityInfrastructureDate else '<a href="community-infrastructure-date" class="govuk-link">Answer</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Other relevant matters", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['other-relevant-matters'] if data['other-relevant-matters'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="other-relevant-matters" class="govuk-link">Change</a>' if data['other-relevant-matters'] else '<a href="other-relevant-matters" class="govuk-link">Answer</a>', classes: "govuk-!-text-align-right" }
      ],
      [
        { text: "Upload other relevant matters", classes: "govuk-!-font-weight-bold govuk-!-width-one-third" },
        { text: data['upload-other-relevant-matters'] if data['upload-other-relevant-matters'] else "Not started", classes: "govuk-!-width-one-half" },
        { html: '<a href="upload-other-relevant-matters" class="govuk-link">Change</a>' if data['upload-other-relevant-matters'] else '<a href="upload-other-relevant-matters" class="govuk-link">Upload</a>', classes: "govuk-!-text-align-right" }
      ]
    ]
  }) }}
</li>
