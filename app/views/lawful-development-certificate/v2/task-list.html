{% extends "layout.html" %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters-from-desktop">
      <h1 class="govuk-heading-l">
        Appeal a lawful development certificate
      </h1>

      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">Manage your appeal</h2>
      <ul class="govuk-list">
        <li><a href="save-and-return/" class="govuk-link--no-visited-state">Save and complete later</a></li>
        <li><a href="invite/email-address" class="govuk-link--no-visited-state">Invite someone to your appeal</a></li>
      </ul>

      <hr class="govuk-section-break govuk-section-break--visible govuk-section-break--xl">

      {# Tweak the task list so we can merge the CYA in #}
      <style>
        .app-task-list>li {
          position: relative;
        }
        .app-task-list__section .govuk-tag {
          position: absolute;
          top: 3px;
          right: 0;
        }
        .govuk-summary-list {
          border-top: 1px solid #b1b4b6;
        }
      </style>

      <ol class="app-task-list">
        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">1. </span> Before you start
            {{ govukTag({
              html: 'Completed'
            }) }}
          </h2>

          <p class="govuk-!-margin-bottom-9">You&rsquo;re appealing a lawful development certificate (LDC) with {{ data['lpa'] or 'Bradford' }} local planning authority. {{ ('Your deadline to appeal is ' + '168' | daysInFuture + '.') if data['section'] == '26H' }}</p>
        </li>





        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">2. </span> Prepare appeal
            {% if data['appeal-details-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['appeal-details-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Your contact details'
                },
                value: {
                  html: (data['applicant-first-name']+' '+data['applicant-last-name'] if data['applicant-first-name'] else 'Jane Doe')+('<br>'+data['agency-name'] if data['agency-name'])+('<br>'+data['applicant-email'] if data['applicant-email'] else 'email@example.com')
                }
                if data['contact-details-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/contact-details?cya=true',
                      html: 'Change'
                    }
                    if data['contact-details-complete'] else
                    {
                      href: 'appeal-details/contact-details',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Named on application'
                },
                value: {
                  html: data['appellant-check'] or 'You'
                }
                if data['appellant-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/appellant-check?cya=true',
                      html: 'Change'
                    }
                    if data['appellant-check-complete'] else
                    {
                      href: 'appeal-details/appellant-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Their name'
                },
                value: {
                  html: (data['appellant-first-name']+' '+data['appellant-last-name'] if data['appellant-first-name'] else 'Joe Bloggs')
                }
                if data['appellant-name-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/appellant-name?cya=true',
                      html: 'Change'
                    }
                    if data['appellant-name-complete'] else
                    {
                      href: 'appeal-details/appellant-name?',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['appellant-check'] == 'Another individual',
              {
                key: {
                  html: 'Company name'
                },
                value: {
                  html: data['company-name'] or 'Acme Ltd'
                }
                if data['company-name-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/company-name?cya=true',
                      html: 'Change'
                    }
                    if data['company-name-complete'] else
                    {
                      href: 'appeal-details/company-name',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['appellant-check'] == 'A company',
              {
                key: {
                  html: 'Application reference'
                },
                value: {
                  html: data['lpa-reference'] or 'ABC123456'
                }
                if data['lpa-reference-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/lpa-reference?cya=true',
                      html: 'Change'
                    }
                    if data['lpa-reference-complete'] else
                    {
                      href: 'appeal-details/lpa-reference',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Enforcement notice'
                },
                value: {
                  html: data['enforcemnet-notice'] or 'No'
                }
                if data['enforcement-notice-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/enforcement-notice?cya=true',
                      html: 'Change'
                    }
                    if data['enforcement-notice-complete'] else
                    {
                      href: 'appeal-details/enforcement-notice',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site address'
                },
                value: {
                  html: (data['address-line-1'] or '1 Road Name')+('<br>'+data['address-line-2'] if data['address-line-2'])+('<br>'+(data['address-town'] or 'London'))+('<br>'+(data['address-postcode'] or 'SW1A 1AA') if data['grid'] != 'true' else '<br>'+(data['address-eastings'] or '529090')+', '+(data['address-northings'] or '179645'))
                }
                if data['address-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/address?cya=true',
                      html: 'Change'
                    }
                    if data['address-complete'] else
                    {
                      href: 'appeal-details/address',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Visible'
                },
                value: {
                  html: 'No<br>'+data['site-visibilityy__details'] if data['site-visibilityy'] == 'No' else 'Yes'
                }
                if data['site-visibility-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/site-visibility?cya=true',
                      html: 'Change'
                    }
                    if data['site-visibility-complete'] else
                    {
                      href: 'appeal-details/site-visibility',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site health and safety issues'
                },
                value: {
                  html: 'Yes<br>'+data['health-and-safety__details'] if data['health-and-safety'] == 'Yes' else 'No'
                }
                if data['health-and-safety-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/health-and-safety?cya=true',
                      html: 'Change'
                    }
                    if data['health-and-safety-complete'] else
                    {
                      href: 'appeal-details/health-and-safety',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Site usage'
                },
                value: {
                  html: data['site-usage'] or 'Residential'
                }
                if data['site-usage-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/site-usage?cya=true',
                      html: 'Change'
                    }
                    if data['site-usage-complete'] else
                    {
                      href: 'appeal-details/site-usage',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Proposed work' if data['section'] == '26H' else 'Proposed use, operation or activity'
                },
                value: {
                  html: data['proposed-usage'] or 'Theme park'
                }
                if data['proposed-usage-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/proposed-usage?cya=true',
                      html: 'Change'
                    }
                    if data['proposed-usage-complete'] else
                    {
                      href: 'appeal-details/proposed-usage',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['section'] == '192' or data['section'] == '26H',
              {
                key: {
                  html: 'Proposal already started'
                },
                value: {
                  html: data['proposal-started'] or 'Yes'
                }
                if data['proposal-started-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/proposal-started?cya=true',
                      html: 'Change'
                    }
                    if data['proposal-started-complete'] else
                    {
                      href: 'appeal-details/proposal-started',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['section'] == '192' or data['section'] == '26H',
              {
                key: {
                  html: 'Appeal procedure'
                },
                value: {
                  html: data['procedure'] or 'Written representations'
                }
                if data['procedure-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/procedure?cya=true',
                      html: 'Change'
                    }
                    if data['procedure-complete'] else
                    {
                      href: 'appeal-details/procedure',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: data['procedure']+' reasons'
                },
                value: {
                  html: data['procedure-reason'] or 'My reasons…'
                }
                if data['procedure--reason-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/procedure--reason?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--reason-complete'] else
                    {
                      href: 'appeal-details/procedure--reason',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry' or data['procedure'] == 'Hearing',
              {
                key: {
                  html: 'Inquiry length'
                },
                value: {
                  html: (data['procedure-lenth'] or '5')+' days'
                }
                if data['procedure--length-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/procedure--length?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--length-complete'] else
                    {
                      href: 'appeal-details/procedure--length',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry',
              {
                key: {
                  html: 'Inquiry witnesses'
                },
                value: {
                  html: (data['procedure-witnesses'] or '2')
                }
                if data['procedure--witnesses-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'appeal-details/procedure--witnesses?cya=true',
                      html: 'Change'
                    }
                    if data['procedure--witnesses-complete'] else
                    {
                      href: 'appeal-details/procedure--witnesses',
                      html: 'Answer'
                    }
                  ]
                }
              } if data['procedure'] == 'Inquiry'
            ]
          }) }}
        </li>




        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">3. </span> Upload documents
            {% if data['uploads-completed'] == 'true' %}
              {{ govukTag({
                html: 'Completed'
              }) }}
            {% elif data['uploads-started'] == 'true' %}
              {{ govukTag({
                html: 'In progress',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Not started',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Application form'
                },
                value: {
                  html: data['application'] | join('<br>') if data['application'] else 'application.pdf'
                }
                if data['application-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/application?cya=true',
                      html: 'Change'
                    }
                    if data['application-complete'] else
                    {
                      href: 'uploads/application',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Plans, drawings and supporting documents'
                },
                value: {
                  html: data['plans'] | join('<br>') if data['plans'] else 'plans.pdf'
                }
                if data['plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/plans?cya=true',
                      html: 'Change'
                    }
                    if data['plans-complete'] else
                    {
                      href: 'uploads/plans',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Decision letter'
                },
                value: {
                  html: data['decision-letter'] | join('<br>') if data['decision-letter'] else 'decision-letter.pdf'
                }
                if data['decision-letter-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/decision-letter?cya=true',
                      html: 'Change'
                    }
                    if data['decision-letter-complete'] else
                    {
                      href: 'uploads/decision-letter',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['decision-check'] == 'Yes',
              {
                key: {
                  html: 'Appeal statement'
                },
                value: {
                  html: data['appeal-statement'] | join('<br>') if data['appeal-statement'] else 'appeal-statement.pdf'
                }
                if data['appeal-statement-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/appeal-statement?cya=true',
                      html: 'Change'
                    }
                    if data['appeal-statement-complete'] else
                    {
                      href: 'uploads/appeal-statement',
                      html: 'Upload'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'Add draft statement of common ground'
                },
                value: {
                  html: data['common-ground-check'] or 'No'
                }
                if data['common-ground-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/common-ground-check?cya=true',
                      html: 'Change'
                    }
                    if data['common-ground-check-complete'] else
                    {
                      href: 'uploads/common-ground-check',
                      html: 'Answer'
                    }
                  ]
                }
              },

              {
                key: {
                  html: 'Draft statement of common ground'
                },
                value: {
                  html: data['common-ground'] | join('<br>') if data['common-ground'] else 'common-ground.pdf'
                }
                if data['common-ground-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/common-ground?cya=true',
                      html: 'Change'
                    }
                    if data['common-ground-complete'] else
                    {
                      href: 'uploads/common-ground',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['common-ground-check'] == 'Yes',
              {
                key: {
                  html: 'Add new plans or drawings'
                },
                value: {
                  html: data['new-plans-check'] or 'No'
                }
                if data['new-plans-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/new-plans-check?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-check-complete'] else
                    {
                      href: 'uploads/new-plans-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New plans or drawings'
                },
                value: {
                  html: data['new-plans'] | join('<br>') if data['new-plans'] else 'new-plans.pdf'
                }
                if data['new-plans-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/new-plans?cya=true',
                      html: 'Change'
                    }
                    if data['new-plans-complete'] else
                    {
                      href: 'uploads/new-plans',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['new-plans-check'] == 'Yes',
              {
                key: {
                  html: 'Add new supporting documents'
                },
                value: {
                  html: data['other-check'] or 'No'
                }
                if data['other-check-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/other-check?cya=true',
                      html: 'Change'
                    }
                    if data['other-check-complete'] else
                    {
                      href: 'uploads/other-check',
                      html: 'Answer'
                    }
                  ]
                }
              },
              {
                key: {
                  html: 'New supporting documents'
                },
                value: {
                  html: data['other'] | join('<br>') if data['other'] else 'other.pdf'
                }
                if data['other-complete'] else
                {
                  html: '<span class="govuk-hint">Not started</span>'
                },
                actions: {
                  items: [
                    {
                      href: 'uploads/other?cya=true',
                      html: 'Change'
                    }
                    if data['other-complete'] else
                    {
                      href: 'uploads/other',
                      html: 'Upload'
                    }
                  ]
                }
              } if data['other-check'] == 'Yes'
            ]
          }) }}
        </li>





        <li>
          <h2 class="app-task-list__section">
            <span class="app-task-list__section-number">4. </span> Submit
            {% if data['appeal-details-completed'] == 'true' and data['uploads-completed'] == 'true' %}
              {{ govukTag({
                html: 'Ready to submit',
                classes: 'govuk-tag--blue'
              }) }}
            {% else %}
              {{ govukTag({
                html: 'Cannot start yet',
                classes: 'govuk-tag--grey'
              }) }}
            {% endif %}
          </h2>
          {{ govukSummaryList({
            classes: 'govuk-!-margin-bottom-9',
            rows: [
              {
                key: {
                  html: 'Accept declaration and submit',
                  classes: 'govuk-!-width-full'
                },
                actions: {
                  items: [
                    {
                      href: 'declaration',
                      html: 'Continue'
                    }
                  ]
                } if data['appeal-details-completed'] == 'true' and data['uploads-completed'] == 'true'
              }
            ]
          }) }}
        </li>
      </ol>
    </div>
  </div>
{% endblock %}

{% block pageScripts %}{% endblock %}