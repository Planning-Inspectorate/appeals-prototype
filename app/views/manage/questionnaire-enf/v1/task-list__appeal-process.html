{% set significantHTML %}
  {% if data['significant-changes'].length == 1 %}
    <!-- 1 answer -->
    <p class="govuk-body">{{ data['significant-changes'][0] }}</p>
    {% if data.localplanchange %}
      {{ data.localplanchange }}
    {% endif %}
    {% if data.nationalpolicychange %}
      {{ data.nationalpolicychange }}
    {% endif %}
    {% if data.courtjudgmentchange %}
      {{ data.courtjudgmentchange }}
    {% endif %}
    {% if data.otherchange %}
      {{ data.otherchange }}
    {% endif %}
  {% else %}
    <!-- more than 1 answer -->
    <ul class="govuk-list govuk-list--bullet">
      {% for item in data['significant-changes'] %}
        <li class="govuk-!-margin-bottom-0">{{ item }}</li>
        {% if item == 'Adopted a new local plan' %}
          {{ data.localplanchange }}
        {% endif %}
        {% if item == 'National policy change' %}
          {{ data.nationalpolicychange }}
        {% endif %}
        {% if item == 'Court judgment' %}
          {{ data.courtjudgmentchange }}
        {% endif %}
        {% if item == 'Other' %}
          {{ data.otherchange }}
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}
{% endset %}

<li>
  <h2 class="app-task-list__section">
    <span class="app-task-list__section-number">7. </span> Appeal process
    {% if data['appeal-process-completed'] == 'true' %}
      {{ govukTag({
        html: 'Completed'
      }) }}
    {% elif data['appeal-process-started'] == 'true' %}
      {{ govukTag({
        html: 'In progress',
        classes: 'govuk-tag--blue'
      }) }}
    {% else %}
      {{ govukTag({
        html: 'Not started',
        classes: 'govuk-tag--grey'
      }) }}
    {% endif %}
  </h2>
  {{ govukSummaryList({
    classes: 'govuk-!-margin-bottom-9',
    rows: [
      {
        key: {
          html: 'Which procedure do you think is most appropriate for this appeal?'
        },
        value: {
          html: (data['procedure'] or 'Written representations')+('<br>Length in days: '+data['procedure-length'] if data['procedure'] == 'Inquiry')
        }
        if data['procedure-complete'] else
        {
          html: '<span class="govuk-hint">Not started</span>'
        },
        actions: {
          items: [
            {
              href: 'appeal-process/procedure?cya=true',
              html: 'Change'
            }
            if data['procedure-complete'] else
            {
              href: 'appeal-process/procedure',
              html: 'Answer'
            }
          ]
        }
      },
      {
        key: {
          html: 'Procedure reason'
        },
        value: {
          html: data['procedure-reason']
        }
        if data['procedure-complete'] else
        {
          html: '<span class="govuk-hint">Not started</span>'
        },
        actions: {
          items: [
            {
              href: 'appeal-process/procedure?cya=true',
              html: 'Change'
            }
            if data['procedure-complete'] else
            {
              href: 'appeal-process/procedure',
              html: 'Answer'
            }
          ]
        }
      } if data['procedure-reason'],
      {
        key: {
          html: 'Are there any other ongoing appeals next to, or close to the site?'
        },
        value: {
          html: data['other-appeals-radio'] or 'No'
        }
        if data['other-appeals-check-complete'] else
        {
          html: '<span class="govuk-hint">Not started</span>'
        },

        actions: {
          items: [
            {
              href: 'appeal-process/other-appeals-check?cya=true',
              html: 'Change'
            }
            if data['other-appeals-complete'] else
            {
              href: 'appeal-process/other-appeals-check',
              html: 'Answer'
            }
          ]
        }
      },
      {
        key: {
          html: 'Appeal references'
        },
        value: {
          html: data['other-appeal-reference'] or '0123456'
        }
        if data['other-appeals-complete'] else
        {
          html: '<span class="govuk-hint">Not started</span>'
        },

        actions: {
          items: [
            {
              href: 'appeal-process/other-appeals?cya=true',
              html: 'Change'
            }
            if data['other-appeals-complete'] else
            {
              href: 'appeal-process/other-appeals',
              html: 'Answer'
            }
          ]
        }
      } if data['other-appeals-radio'] == "Yes",

      {
        key: {
          html: 'Are there any new conditions?'
        },
        value: {
          html: (data['extra-conditions-check'] or 'No')+('<br>Conditions:'+data['extra-conditions'] if data['extra-conditions-check'] == 'Yes')
        }
        if data['extra-conditions-complete'] else
        {
          html: '<span class="govuk-hint">Not started</span>'
        },
        actions: {
          items: [
            {
              href: 'appeal-process/extra-conditions?cya=true',
              html: 'Change'
            }
            if data['extra-conditions-complete'] else
            {
              href: 'appeal-process/extra-conditions',
              html: 'Answer'
            }
          ]
        }
      }

    ]
  }) }}
</li>
