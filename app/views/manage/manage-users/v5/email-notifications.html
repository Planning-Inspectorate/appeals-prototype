{% extends '_layouts/layout-pins-manage-users.html' %}

{% set title = 'Email notifications' %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "Beta"
    },
    html: 'This is a new service â€“ your <a class="govuk-link" href="#">feedback</a> will help us to improve it.'
  }) }}
  {{ govukBackLink({
    html: 'Back',
    href: 'javascript:history.back()'
  }) }}
{% endblock %}

{% block content %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-full">
{% from "govuk/components/radios/macro.njk" import govukRadios %}

<form method="post" action="email-notifications">
{{ govukRadios({
  name: "email-notifications",
  fieldset: {
    legend: {
      text: "Choose appeal types for the user to receive email notifications for",
      isPageHeading: true,
      classes: "govuk-fieldset__legend--l"
    }
  },
  hint: {
    text: "This will determine which appeal types " ~ data['new-user-email'] ~ " receives emails for"
    },
  items: [
    {
      value: "all-appeals",
      text: "All appeal types",
      checked: data['email-notifications'] == 'all-appeals'
    },
    {
      value: "Particular appeal types",
       text: "Particular appeal types",
      checked: data['email-notifications'] == 'Particular appeal types'
    },
    {
      value: "no-email-notifications",
      text: "No email notifications",
      checked: data['email-notifications'] == 'no-email-notifications'
    }
  ]
}) }}

      {% block buttons %}
        {{ govukButton({
          text: 'Continue'
        }) }}
      {% endblock %}

</form>

<script>
  (function () {
    const url = new URL(window.location.href)
    if (!url.searchParams.has('reloaded')) {
      url.searchParams.set('reloaded', 'true')
      window.location.replace(url.toString())
    }
  })()
</script>

{% endblock %}
